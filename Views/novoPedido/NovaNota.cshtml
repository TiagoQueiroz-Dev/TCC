@model EstoquePedidoNotaModel
@{
  ViewData["Title"] = "Nova Nota";
}

<div class="text-center">
  <form method="post" asp-action="CadastrarNota" asp-controller="novoPedido">
    <div class="mb-3">
      <label for="nome" class="form-label">Nome:</label>
      <input type="text" asp-for="@Model.NovaNota.Nome" class="form-control" id="nome" aria-describedby="txtHelp">
    </div>
    <div class="mb-3">
      <label for="CNPJ_CPF" class="form-label">CNPJ / CPF:</label>
      <input type="number" asp-for="@Model.NovaNota.CNPJ" class="form-control" id="CNPJ_CPF">
    </div>
    <div class="mb-3">
      <label for="Telefone" class="form-label">Telefone:</label>
      <input type="number" asp-for="@Model.NovaNota.Telefone" class="form-control" id="Telefone">
    </div>
    <div class="mb-3">
      <label for="Data_aluguel" class="form-label">Data da nota:</label>
      <input type="date" asp-for="@Model.NovaNota.DataEmissao" class="form-control" id="Data_aluguel">
    </div>
    <div class="mb-3">
      <label for="Data_recolhimento" class="form-label">Data de recolhimento:</label>
      <input type="date" asp-for="@Model.NovaNota.DataRecolhimento" class="form-control" id="Data_recolhimento">
    </div>
    <div class="mb-3">
      <label for="produto" class="form-label">Produtos solicitados:</label>

        @* caso seja feito a api, será necessário tratar esses dados para serem encaminhados para a asp-controller *@

        @for (int i = 0; i < @Model.Pedidos.Count; i++)
        {
          @for (int j = 0; j < @Model.Estoque.Count; j++)
          {
            @if (@Model.Pedidos[i].IdProduto == @Model.Estoque[j].Id)
            {
              <label>@Model.Estoque[j].Nome</label>
              <input type="hidden" asp-for="@Model.Pedidos[i].IdProduto" value="@Model.Pedidos[i].IdProduto">
              <input type="hidden" asp-for="@Model.Pedidos[i].Quantidade" value="@Model.Pedidos[i].Quantidade">
            }
          }
        }
      
      <div class="mb-3">
        <label for="valor_total" class="form-label">Valor total:</label>
        <input type="number" class="form-control" asp-for="@Model.ValorTotalPedido" id="valor_total" readonly>
      </div>
      <div class="mb-3 text-start d-flex flex-column">
        <h4>Endereço</h4>
        <div class="mb-3 d-flex justify-content-around">
          <div class="w-100 pe-3">
            <label for="CEP" class="form-label">CEP:</label>
            <input type="number" asp-for="@Model.NovaNota.Cep" class="form-control" id="CEP">
          </div>
          <div class="w-100 pe-3">
            <label for="Cidade" class="form-label">Cidade:</label>
            <input type="text" asp-for="@Model.NovaNota.Cidade" class="form-control" id="Cidade">
          </div>
          <div class="w-100">
            <label for="Bairro" class="form-label">Bairro:</label>
            <input type="text" asp-for="@Model.NovaNota.Bairro" class="form-control" id="Bairro">
          </div>
        </div>
        <div class="mb-3 d-flex justify-content-around">
            @*<div class="w-100 pe-3">
          <label for="CEP" class="form-label">Logradouro:</label>
          <input type="number" name="Logradouro" class="form-control" id="CEP">
          </div>*@
          <div class="w-100 pe-3">
            <label for="numero" class="form-label">Número n°:</label>
            <input type="number" asp-for="@Model.NovaNota.Numero" class="form-control" id="numero">
          </div>
          <div class="w-100">
            <label for="Complemento" class="form-label">Complemento (Opcional):</label>
            <input type="text" asp-for="@Model.NovaNota.Complemento" class="form-control" id="Complemento">
          </div>
        </div>
        <button type="submit" class="btn btn-primary">Enviar</button>
  </form>
</div>